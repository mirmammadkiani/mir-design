<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Art Editor</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="toolbar">
        <div class="panel-section">
            <h4>Panels</h4>
            <div class="top-toolbar-buttons">
                <button id="file-btn" title="File"><i class="bi bi-file-earmark"></i></button>
                <button id="view-btn" title="View"><i class="bi bi-eye"></i></button>
                <button id="about-btn" title="About"><i class="bi bi-info-circle"></i></button>
            </div>
        </div>
        <hr> <!-- This hr is now between the "Panels" section and "Canvas" section -->
        <!-- Tools -->
        <div class="tool-group">
            <h4>Tools</h4>
            <div class="tool-grid">
                <button class="tool-btn" id="select-tool" title="Select"><i class="bi bi-cursor"></i></button>
                <button class="tool-btn" id="rectangle-tool" title="Rectangle"><i class="bi bi-square"></i></button>
                <button class="tool-btn" id="circle-tool" title="Circle"><i class="bi bi-circle"></i></button>
                <button class="tool-btn" id="line-tool" title="Line"><i class="bi bi-slash-lg"></i></button>
                <button class="tool-btn" id="add-image-btn" title="Add Image"><i class="bi bi-image"></i></button>
                <button class="tool-btn" id="crop-tool" title="Crop"><i class="bi bi-crop"></i></button>
                <button class="tool-btn" id="hand-tool" title="Hand Tool"><i class="bi bi-hand-index-thumb"></i></button>
                <button class="tool-btn" id="eraser-tool" title="Eraser"><i class="bi bi-eraser"></i></button>
                <button class="tool-btn" id="eyedropper-tool" title="Eyedropper"><i class="bi bi-eyedropper"></i></button>
                <div class="tool-color-picker">
                     <input type="color" id="color-picker" value="#000000" title="Color">
                </div>
            </div>
             <input type="file" id="image-input" accept="image/*" style="display: none;">
        </div>

        <hr id="grid-panel-separator"> <!-- Added ID -->

        <!-- View Settings -->
        <div id="grid-tool-group" class="tool-group"> <!-- Added ID -->
            <h4>Grid</h4>
            <div class="tool tool-row-toggle">
                <label for="guide-grid-toggle">Guide Grid</label>
                <input type="checkbox" id="guide-grid-toggle" class="toggle-switch" checked>
            </div>
            <div class="tool tool-row">
                <label for="guide-grid-color-picker">Color</label>
                <input type="color" id="guide-grid-color-picker" value="#d35400"> <!-- Darker Orange for Guide Grid -->
            </div>
            <div class="tool tool-row-toggle">
                <label for="grid-toggle">Snap Grid</label>
                <input type="checkbox" id="grid-toggle" class="toggle-switch" checked>
            </div>
            <div class="tool tool-row">
                <label for="grid-color-picker">Color</label>
                <input type="color" id="grid-color-picker" value="#e67e22"> <!-- Darker Orange for Snap Grid -->
            </div>
             <div class="tool tool-row-toggle">
                <label for="snap-toggle">Snap to Grid</label>
                <input type="checkbox" id="snap-toggle" class="toggle-switch" checked>
            </div>
            <div class="tool tool-row">
                <label for="snap-size-input">Size</label>
                <input type="number" id="snap-size-input" value="4" min="4">
            </div>
        </div>
        
        <hr>

        <!-- Zoom -->
        <div class="tool-group">
            <div class="tool-group-header">
                <h4>Zoom</h4>
                <button id="reset-zoom-btn" title="Reset Zoom"><i class="bi bi-arrow-counterclockwise"></i></button>
            </div>
            <div class="tool">
                <input type="range" id="zoom-slider" min="10" max="3200" value="100">
            </div>
        </div>
    </div>

    <div id="canvas-container">
        <div id="viewport">
            <canvas id="artboard"></canvas>
        </div>
    </div>

    <div id="right-panel">
        <div id="layers-panel" class="panel">
            <h3>Layers</h3>
            <div id="layer-list">
                <!-- Layers will be added here -->
            </div>
            <div class="layer-actions">
                <button id="add-layer-btn" title="Add Layer"><i class="bi bi-plus-lg"></i></button>
                <button id="delete-layer-btn" title="Delete Layer"><i class="bi bi-trash-fill"></i></button>
            </div>
        </div>
        <hr> <!-- Moved hr here -->
        <div id="history-panel" class="panel">
            <h3>History</h3>
            <div id="history-list">
                <!-- History items will be added here -->
            </div>
        </div>
        </div> <!-- Closing div for #right-panel -->

    <div id="file-popup-panel" class="popup-panel">
        <h3>Canvas Information</h3>
        <p>Width: <span id="canvas-info-width"></span> px</p>
        <p>Height: <span id="canvas-info-height"></span> px</p>
        <p>Zoom Level: <span id="canvas-info-zoom"></span>%</p>

        <hr> <!-- Add a separator -->

        <h3>Create New Artboard</h3>
        <div class="tool-row-compact">
            <div class="tool tool-row">
                <label for="width-input">W</label>
                <input type="number" id="width-input" value="128" step="32" title="Width">
            </div>
            <div class="tool tool-row">
                <label for="height-input">H</label>
                <input type="number" id="height-input" value="128" step="32" title="Height">
            </div>
        </div>
        <button id="create-btn" class="tool-full-width">Create Artboard</button>

        <hr> <!-- Add another separator -->

        <button id="save-project-btn" class="tool-full-width">Save Project</button>
        <input type="file" id="load-project-input" accept=".json" style="display: none;">
        <button id="load-project-btn" class="tool-full-width">Load Project</button>
        <button id="export-btn" class="tool-full-width">Export as PNG</button>
        <button id="close-file-popup-btn" class="tool-full-width">Close</button>
    </div>

    <div id="view-popup-panel" class="popup-panel">
        <h3>View Settings</h3>
        <div class="tool tool-row-toggle">
            <label for="toggle-layers-panel">Layers Panel</label>
            <input type="checkbox" id="toggle-layers-panel" class="toggle-switch" checked>
        </div>
        <div class="tool tool-row-toggle">
            <label for="toggle-history-panel">History Panel</label>
            <input type="checkbox" id="toggle-history-panel" class="toggle-switch" checked>
        </div>
        <div class="tool tool-row-toggle">
            <label for="toggle-grid-panel">Grid Panel</label>
            <input type="checkbox" id="toggle-grid-panel" class="toggle-switch" checked>
        </div>
        <button id="close-view-popup-btn" class="tool-full-width">Close</button>
    </div>

    <div id="about-popup-panel" class="popup-panel">
        <h3>About Pixel Art Editor</h3>
        <p>Software for everyone</p> <!-- Moved and changed to English -->
        <p>Version: 0.5</p>
        <p>Developed by: mirMammad</p> <!-- Changed name -->
        <p>This is a simple pixel art editor built with HTML, CSS, and JavaScript.</p>
        <button id="close-about-popup-btn" class="tool-full-width">Close</button>
    </div>

    <script src="script.js"></script>
</body>
</html>